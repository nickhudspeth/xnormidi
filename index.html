<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xnor_midi: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>xnor_midi Documentation</h1>  </div>
</div>
<div class="contents">
<h3 class="version">git </h3><h2><a class="anchor" id="Overview"></a>
Overview</h2>
<p>xnor midi is a device independent midi library written by Ale xnor man.</p>
<h2><a class="anchor" id="Licence"></a>
Licence</h2>
<p>Copyright Alex Norman, <a href="http://www.gnu.org/licenses/gpl.html">GNU GPL licence Version 3.</a></p>
<h2><a class="anchor" id="Webpage"></a>
Webpage</h2>
<p>xnor midi is available here: <a href="http://x37v.info/projects/xnormidi">xnor midi webpage</a>. There you will find info about how to get the source code.</p>
<h2><a class="anchor" id="Usage"></a>
Usage</h2>
<p>The most important modules are here: </p>
<ul>
<li>
<a class="el" href="group__midi__device__setup__process.html">Device initialization and processing</a> </li>
<li>
<a class="el" href="group__send__functions.html">Midi send functions</a> </li>
<li>
<a class="el" href="group__input__callback__reg.html">Input callback registration functions</a> </li>
</ul>
<p>If you intend to make your own device implementation you should check this module out: </p>
<ul>
<li>
<a class="el" href="group__midi__device.html">Functions used when implementing your own midi device.</a> </li>
</ul>
<p>There are some sysex utilities here: </p>
<ul>
<li>
<a class="el" href="group__sysex__tools.html">Sysex utility functions</a> </li>
</ul>
<h2><a class="anchor" id="Example"></a>
Example</h2>
<p>Here is a simple example that uses the lufa usb implementation. We setup the device, register some callbacks, use some send functions and call the process function.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &quot;midi_usb.h&quot;</span> <span class="comment">//see the lufa_midi implementation</span>

<span class="comment">//echo data back</span>
<span class="keywordtype">void</span> fallthrough_callback(<a class="code" href="struct__midi__device.html" title="This structure represents the input and output functions and processing data for a midi device...">MidiDevice</a> * device, uint16_t cnt, uint8_t byte0, uint8_t byte1, uint8_t byte2){
   <span class="comment">//pass the data back to the device, using the general purpose send data</span>
   <span class="comment">//function, any bytes after cnt are ignored</span>
   <a class="code" href="group__send__functions.html#ga36e2f2e45369d911b76969361679054b" title="Send up to 3 bytes of data.">midi_send_data</a>(device, cnt, byte0, byte1, byte2);
}

<span class="keywordtype">void</span> cc_callback(<a class="code" href="struct__midi__device.html" title="This structure represents the input and output functions and processing data for a midi device...">MidiDevice</a> * device, uint8_t chan, uint8_t num, uint8_t val) {
   <span class="comment">//sending it back on the next channel</span>
   <a class="code" href="group__send__functions.html#gaaf884811c92df405ca8fe1a00082f960" title="Send a control change message (cc) via the given device.">midi_send_cc</a>(device, (chan + 1) % 16, num, val);
}

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {
   <a class="code" href="struct__midi__device.html" title="This structure represents the input and output functions and processing data for a midi device...">MidiDevice</a> midi_device;

   <span class="comment">//setup the device</span>
   midi_usb_init(&amp;midi_device);

   <span class="comment">//register callbacks</span>
   <a class="code" href="group__input__callback__reg.html#ga7ed189164aa9682862b3181153afbd94" title="Register fall through callback.">midi_register_fallthrough_callback</a>(&amp;midi_device, fallthrough_callback);
   <a class="code" href="group__input__callback__reg.html#ga64ab672abbbe393c9c4a83110c8df718" title="Register a control change message (cc) callback.">midi_register_cc_callback</a>(&amp;midi_device, cc_callback);

   <span class="comment">//send some messages</span>
   <a class="code" href="group__send__functions.html#gaaf884811c92df405ca8fe1a00082f960" title="Send a control change message (cc) via the given device.">midi_send_cc</a>(&amp;midi_device, 0, 1, 2);

   <a class="code" href="group__send__functions.html#ga467bcf46dbf03ec269ce565b46bc2775" title="Send a note on message via the given device.">midi_send_noteon</a>(&amp;midi_device, 0, 64, 127);
   <a class="code" href="group__send__functions.html#gaedb7d8805425eef5d47d57ddcb4c7a49" title="Send a note off message via the given device.">midi_send_noteoff</a>(&amp;midi_device, 0, 64, 127);

   <span class="keywordflow">while</span>(1){
      <span class="comment">//processes input from the midi device and calls the appropriate callbacks</span>
      <a class="code" href="group__midi__device__setup__process.html#gaa3d5993d0e998a1b59bbf5ab9c7b492b" title="Process input data.">midi_device_process</a>(&amp;midi_device);
   }

   <span class="keywordflow">return</span> 0; <span class="comment">//never happens</span>
}
</pre></div> </div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 20 2011 13:36:06 for xnor_midi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
